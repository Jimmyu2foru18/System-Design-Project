<!--
Authors: James McGuigan, Steven Foster
Description: Main landing page that:
- Displays trending recipes in horizontal scrollable section
- Shows featured recipe collections
- Provides recommended recipes based on ratings
- Implements dynamic card animations and hover effects
- Handles recipe favoriting functionality
- Uses placeholder data until database integration
- Maintains responsive design across devices
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recspicy - Discover Delicious Recipes</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex flex-col bg-gray-100">
    <!-- Navigation Bar -->
    <nav id="nav-container"></nav>

    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Hero Section -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden mb-12">
            <div class="relative h-96">
                <img src="https://source.unsplash.com/1600x900/?cooking" 
                     alt="Featured Recipe" 
                     class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent"></div>
                <div class="absolute bottom-0 left-0 right-0 p-8 text-white">
                    <h1 class="text-4xl font-bold mb-4">Welcome to Recspicy</h1>
                    <p class="text-xl">Discover, create, and share delicious recipes</p>
                </div>
            </div>
        </div>

        <!-- Top 5 Visited Today -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6">Trending Today</h2>
            <div class="flex space-x-6 overflow-x-auto pb-4" id="trending-recipes">
                <!-- Trending recipe cards will be loaded here -->
            </div>
        </section>

        <!-- Check These Out Section -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6">Check These Out</h2>
            <div class="flex space-x-6 overflow-x-auto pb-4" id="featured-recipes">
                <!-- Featured recipe cards will be loaded here -->
            </div>
        </section>

        <!-- Our Recommendations -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6">Our Recommendations</h2>
            <div class="flex space-x-6 overflow-x-auto pb-4" id="recommended-recipes">
                <!-- Recommended recipe cards will be loaded here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <div id="footer-container"></div>

    <!-- Auth Modal -->
    <div id="auth-modal-container"></div>

    <!-- Scripts -->
    <script src="navigation.js"></script>
    <script src="placeholder-utils.js"></script>
    <script src="recipeService.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Load trending recipes (top 5 visited today)
                const trendingRecipes = PlaceholderUtils.getTrendingRecipes();
                displayTrendingRecipes(trendingRecipes);

                // Load featured recipes
                const featuredRecipes = PlaceholderUtils.getFeaturedRecipes();
                displayFeaturedRecipes(featuredRecipes);

                // Load recommended recipes
                const recommendedRecipes = PlaceholderUtils.getRecommendedRecipes();
                displayRecommendedRecipes(recommendedRecipes);

            } catch (error) {
                console.error('Error loading recipes:', error);
            }
        });

        function createRecipeCard(recipe) {
            const isFavorited = recipe.isFavorited ? 'text-blue-600' : 'text-gray-400';
            return `
                <div class="recipe-card bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl">
                    <img src="${recipe.image}" 
                         alt="${recipe.title}" 
                         class="w-full h-48 object-cover">
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg">${recipe.title}</h3>
                            <button onclick="toggleFavorite('${recipe._id}', this)" 
                                    class="favorite-btn ${isFavorited} hover:scale-110 transition-all">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9.653 16.915l-.005-.003-.019-.01a20.759 20.759 0 01-1.162-.682 22.045 22.045 0 01-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 018-2.828A4.5 4.5 0 0118 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 01-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 01-.69.001l-.002-.001z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="flex items-center mb-2">
                            <div class="text-yellow-400">
                                ${'★'.repeat(Math.round(recipe.rating))}
                                ${'☆'.repeat(5 - Math.round(recipe.rating))}
                            </div>
                            <span class="text-gray-600 ml-2">(${recipe.ratingCount})</span>
                        </div>
                        <p class="text-gray-600 text-sm description-truncate">
                            ${recipe.description}
                        </p>
                        <a href="recipe.html?id=${recipe._id}" 
                           class="block mt-4 text-blue-600 hover:text-blue-800">
                            View Recipe →
                        </a>
                    </div>
                </div>
            `;
        }

        function displayTrendingRecipes(recipes) {
            const container = document.getElementById('trending-recipes');
            container.innerHTML = recipes.map(recipe => createRecipeCard(recipe)).join('');
        }

        function displayFeaturedRecipes(recipes) {
            const container = document.getElementById('featured-recipes');
            container.innerHTML = recipes.map(recipe => createRecipeCard(recipe)).join('');
        }

        function displayRecommendedRecipes(recipes) {
            const container = document.getElementById('recommended-recipes');
            container.innerHTML = recipes.map(recipe => createRecipeCard(recipe)).join('');
        }

        async function toggleFavorite(recipeId, button) {
            try {
                const result = await RecipeService.toggleFavorite(recipeId);
                if (result.favorited) {
                    button.classList.remove('text-gray-400');
                    button.classList.add('text-blue-600');
                } else {
                    button.classList.remove('text-blue-600');
                    button.classList.add('text-gray-400');
                }
            } catch (error) {
                console.error('Error toggling favorite:', error);
            }
        }

        // Add horizontal scroll with mouse drag
        function enableDragScroll(element) {
            let isDown = false;
            let startX;
            let scrollLeft;

            element.addEventListener('mousedown', (e) => {
                isDown = true;
                element.classList.add('active');
                startX = e.pageX - element.offsetLeft;
                scrollLeft = element.scrollLeft;
            });

            element.addEventListener('mouseleave', () => {
                isDown = false;
                element.classList.remove('active');
            });

            element.addEventListener('mouseup', () => {
                isDown = false;
                element.classList.remove('active');
            });

            element.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - element.offsetLeft;
                const walk = (x - startX) * 2;
                element.scrollLeft = scrollLeft - walk;
            });
        }

        // Enable drag scroll for all recipe containers
        document.addEventListener('DOMContentLoaded', () => {
            const containers = [
                document.getElementById('trending-recipes'),
                document.getElementById('featured-recipes'),
                document.getElementById('recommended-recipes')
            ];
            containers.forEach(enableDragScroll);
        });
    </script>

    <style>
        /* Hide scrollbar but keep functionality */
        .overflow-x-auto {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .overflow-x-auto::-webkit-scrollbar {
            display: none;
        }
        
        /* Card hover animations */
        .recipe-card {
            transition: all 0.3s ease;
            width: 300px;
            flex-shrink: 0;
        }
        .recipe-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        /* Truncate description for the recipies to display at bottom we dont want to see full so we do this */
        .description-truncate {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</body>
</html> 
